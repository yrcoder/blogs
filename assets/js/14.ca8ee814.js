(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{183:function(n,e,t){"use strict";t.r(e);var s=t(0),r=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"shell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shell","aria-hidden":"true"}},[n._v("#")]),n._v(" shell")]),n._v(" "),t("p",[n._v("此权限时使用命令 chattr 的 a 属性来设置的，具体命令为：\nsudo chattr +a file(filename)\n取消此权限命令：\nsudo chattr -a file(filename)")]),n._v(" "),t("p",[n._v("若递归的设置文件夹的此种权限，使用-R 属性：\nsudo chattr +a -R file(filename)\n递归取消文件夹的此属性：\nsudo chattr -a -R file(filename)")]),n._v(" "),t("h1",{attrs:{id:"linux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux","aria-hidden":"true"}},[n._v("#")]),n._v(" linux")]),n._v(" "),t("p",[n._v("吾注：\n文件的增删改查\n用户的权限(什么人可以增删改查)\n各种软件的安装和使用(环境变量，开机启动，进程管理等等)")]),n._v(" "),t("p",[n._v("大小写区分\n一切皆文件\n后缀名不重要")]),n._v(" "),t("p",[n._v("有没有公网 IP 区分是不是服务器")]),n._v(" "),t("p",[n._v("CentOs\n虚拟机是什么？\nvirtualbox\n安装虚拟机电脑要支持虚拟化，BIOS 开启虚拟化支持。\n在虚拟机中安装操作系统\n安装 centOs\n网络设置成桥接\n改变默认源")]),n._v(" "),t("p",[n._v("准备工作\nifconfig\nip addr\nvi /etc/sysconfig/network-scripts/ifcfg (tab 键提示)\nyum install net-tools (可以用 ifconfig 命令)")]),n._v(" "),t("p",[n._v("vi /etc/sysconfig/network-scripts/ifcfg\n把 ONBOOT 设置为 yes\n将网络服务重启\nservice network restart")]),n._v(" "),t("p",[n._v("cat /etc/redhat-release")]),n._v(" "),t("p",[n._v("yum install wget")]),n._v(" "),t("h1",{attrs:{id:"ssh-一个协议-类似-http-协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh-一个协议-类似-http-协议","aria-hidden":"true"}},[n._v("#")]),n._v(" ssh 一个协议(类似 http 协议)")]),n._v(" "),t("p",[n._v("ssh： secure shell 安全外壳协议\n远程链接的方案\n建立在应用层基础上的安全协议，可靠，专为远程登录会话和其他网络服务提供安全性的协议\n有效防止远程管理过程中对信息泄露问题\nssh 客户端适用于多种平台\nssh 服务端几乎支持所有 UNIX 平台")]),n._v(" "),t("p",[n._v("在服务器中安装 ssh 服务\nyum install openssh-server\n启动\nservice sshd start\n设置开机运行\nchkconfig sshd on\n查看进程是否存在\nps -ef |grep ssh")]),n._v(" "),t("p",[n._v("客户端安装 ssh 工具\nwindow: xshell\nlinux: 执行命令 yum install openssh-clients")]),n._v(" "),t("p",[n._v("链接命令\nssh root@xxx.xxx.xxx\nexit")]),n._v(" "),t("p",[n._v('ssh config\n方便批量管理多个 ssh\nconfig 存放在 ～/.ssh/config\n配置语法：\n查看是不是能连上\nping 192.168.0.022\ncd ~/.ssh/\n新建文件\ntouch config\n编辑文件\nvim config\n内容\nhost "lyr"\nHostName 192.168.0.102\nUser root\nPort 22\n设置完之后再链接不需要输入 ssh root@192.168.0.102\n只需要输入 ssh lyr')]),n._v(" "),t("p",[n._v('多台服务器\nhost "lyr"\nHostName 192.168.0.102\nUser root\nPort 22')]),n._v(" "),t("p",[n._v('host "lyr2"\nHostName 192.168.0.102\nUser root\nPort 22')]),n._v(" "),t("p",[n._v("免密登录\nssh key 使用非对称加密方式生成公钥和私钥，存放在～/.ssh 目录\n公钥可以对外公开\n～/.ssh/authorized_keys\n生成 ssh key\nssh-keygen -t rsa 或者 ssh-keygen -t dsa")]),n._v(" "),t("p",[n._v("ssh 安全端口\n默认 22\n修改端口\nvim /etc/ssh/sshd_config\n服务重启\nservice sshd restart")]),n._v(" "),t("h1",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令","aria-hidden":"true"}},[n._v("#")]),n._v(" 常用命令")]),n._v(" "),t("ul",[t("li",[n._v("软件操作命令")])]),n._v(" "),t("p",[n._v("软件包管理器：yum\n安装软件：yum install xxx\n卸载：yum remove xxx\n搜索：yum search xxx\n清理缓存：yum clean packages\n列出已安装：yum list\n软件包信息：yum info xxx")]),n._v(" "),t("ul",[t("li",[n._v("服务器硬件资源和磁盘操作")])]),n._v(" "),t("p",[n._v("查看内存：free -m (-m 以 M 的形式展示)\n硬盘：df -h (-h 是以人类可以看的懂的形式展示)\n负载：w/top (1 说明满了)\ncpu 个数和核数：cat /proc/cpuinfo\n格式化磁盘：fdisk")]),n._v(" "),t("ul",[t("li",[n._v("文件和文件夹操作命令")])]),n._v(" "),t("p",[n._v("目录结构")]),n._v(" "),t("pre",[t("code",[n._v("* 根目录 /\n* 家目录 /home\n* 临时目录 /tmp\n* 配置目录 /etc\n* 用户程序目录 /usr\n/usr/bin\n/usr/sbin\n")])]),n._v(" "),t("p",[n._v("命令")]),n._v(" "),t("pre",[t("code",[n._v("* ls; ls -al === ll\n* touch; 新建文件\n* mkdir; 新建文件夹。 循环新建: mkdir -p lyr/test/test1;\n* rm; rm 删除文件。 删除文件夹: rm -r xxx; 强制删除: rm -rf xxx\n* cp 源文件路径 目标路径; 复制文件\n* mv 源文件路径 目标路径; 移动文件\n* pwd; 显示当前路径\n")])]),n._v(" "),t("p",[n._v("vim")]),n._v(" "),t("pre",[t("code",[n._v("* 首行: G\n* 尾行: gg\n* 删除当前光标所在行: dd\n* 恢复: u\n* 复制: yy\n* 粘贴: p\n* 显示行数: :set number\n")])]),n._v(" "),t("p",[n._v("文件权限 421")]),n._v(" "),t("pre",[t("code",[n._v("* r w x -> 1*2*2 + 1 * 2 + 1*1\n* 读r: 4\n* 写w: 2\n* 可执行x: 1\n* -rw-r--r--: rw-(读写的权限); r--(读的权限)\n* drwxr-xr-x: d表示目录结构;rwx(最高权限，读写可执行);r-x(读和执行);r-x(读和执行)\n* 777是最大的权限\n")])]),n._v(" "),t("p",[n._v("文件搜索，查找，读取")]),n._v(" "),t("pre",[t("code",[n._v("* tail: 从文件尾部开始读取 tail -f xxx, 当在另一个窗口编辑的时候可以自动读取尾部信息\n* head: 从文件头部开始读取\n* cat: 读取整个文件\n* more: 分页读取, 从头部开始读，按enter键一行一行往下跑\n* less: 可控分页\n* grep: 搜索关键字, grep 'aaa' xxx(查找文件中带aaa的); grep -n 'aaa' xxx(带行号)\n* find: 查找文件, find .(列出当前目录下的所有文件); find . -name \"*.c\"(找出当前目录下,以.c为结尾的文件名); find . -type f(找出当前目录下的文件); find . -type d(找出当前目录下的文件夹); find . -ctime -20(找出当前目录下20天内更新过的文件, -ctime -20 指当前时间减去20天); find . -type f -mtime + 7(找出当前目录下的7天之前更新过的文件, -mtime 最后更新的时间); find . -type f -perm 777 -exec ls -l {} \\(找到当前目录下权限是777的文件并列出它们)\n* wc: 统计个数, cat xxx | wc -l (xxx文件总共多少行)\n* |: 管道，将第一个命令执行完之后的结果传给第二个命令，grep \"2017-08-22 15:30\" xxx | more\n")])]),n._v(" "),t("p",[n._v("文件压缩与解压")]),n._v(" "),t("pre",[t("code",[n._v("* tar\n* man tar; tar 命令的操作手册\n* tar -cvf|tvf|xvf\n* tar -czvf|tzvf|xzvf\n")])]),n._v(" "),t("ul",[t("li",[t("p",[n._v("系统用户操作命令")]),n._v(" "),t("ul",[t("li",[n._v("添加用户: useradd(adduser); adduser lyr_test; /home 文件夹下多一个目录")]),n._v(" "),t("li",[n._v("删除用户: userdel [username]; 删除文件之后，文件夹还在, rm -rf /home/lyr_test; userdel -r [username]彻底删除，包括目录")]),n._v(" "),t("li",[n._v("设置密码: passwd [username]")])])])]),n._v(" "),t("ul",[t("li",[t("p",[n._v("防火墙相关设置")]),n._v(" "),t("ul",[t("li",[n._v("作用: 保护服务器的安全")]),n._v(" "),t("li",[n._v("设置防火墙规则(开放 80, 22, 43 端口)")]),n._v(" "),t("li",[n._v("查看是否安装: yum list | grep firewall")]),n._v(" "),t("li",[n._v("查看是否启动：ps -ef | grep firewall")]),n._v(" "),t("li",[n._v("安装：yum install firewalld")]),n._v(" "),t("li",[n._v("启动/重启：service firewalld start/restart")]),n._v(" "),t("li",[n._v("检查状态： service firewalld status")]),n._v(" "),t("li",[n._v("关闭或者禁用：service firewalld stop/disable")]),n._v(" "),t("li",[n._v("简单操作: firewall-cmd --version; firewall-cmd --help;firewall-cmd --get-zones(查看防火墙区域);firewall-cmd --get-default-zones(查看防火墙默认区域);firewall-cmd --list-all-zone(查看防火墙每个区域的配置信息);firewall-cmd --zone=public(查看某个防火墙的区域); firewall-cmd --list-ports(查看防火墙的端口);\nfirewall-cmd --query-service=ssh(查看是否允许这个服务访问);firewall-cmd --remove-service=ssh(删除服务,删除之后就不能访问了);firewall-cmd --add-service=ssh(添加服务); firewall-cmd --list-service(查询有哪些服务); firewall-cmd --add-port=22/tcp(添加端口，就可以登录了？);firewall-cmd --remove-port=22/tcp(删除端口);")])])])]),n._v(" "),t("ul",[t("li",[t("p",[n._v("提权操作 sudo 和文件传输操作")]),n._v(" "),t("ul",[t("li",[n._v("提权操作：sudo(visudo 编辑 sudo 配置), 找到 ALL 的权限，复制")]),n._v(" "),t("li",[n._v("文件下载(wget,curl): wegt http://www/baidu.com; curl -o 我起的名字 http://www/baidu.com;")]),n._v(" "),t("li",[n._v("文件上传(scp): scp 本地的文件名 用户+服务器+路径; scp text.txt root@192.168.0.0.1:/tmp/; scp root@192.168.0.0.1:/tmp/text.txt ./; (将服务器上的文件下载到本地当前目录)")])])])]),n._v(" "),t("h1",{attrs:{id:"webserver-安装和配置讲解（nginx）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webserver-安装和配置讲解（nginx）","aria-hidden":"true"}},[n._v("#")]),n._v(" webServer 安装和配置讲解（nginx）")]),n._v(" "),t("p",[n._v("安装: yum install nginx\n启动，停止，重载: service nginx start/restart/stop/reload\n反向代理：隐藏了后台服务器")]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("# 负载均衡\nupstream lyr_hosts {\n    server 192.169.0.092 weight=5;\n    server 192.169.0.000 weight=1;\n}\nserver {\n    # 可以监听多个端口\n    listen 80;\n    listen 999;\n    # 可以设置多个访问域名\n    server_name www.aaa.com www.bbb.com;\n    root /data/www;\n    index index.html index.htm;\n    # 日志的位置，和模式\n    access_log /var/log/nginx/access_imooc.log lyr_test;\n    location / {\n        # 伪静态\n        rewrite ^(.*)\\.htmp$ /index.html;\n        # 反向代理，（后台服务器）\n        proxy_pass http://aaa.bbb.com\n        # 反向代理可能会用到的规则\n        # proxy_set_header Host aaa.bbb.cn\n    }\n}\n\n\n# 日志的格式化\nvim /etc/nginx/nginx.conf\n\nhttp {\n    # 定义日志格式（可以多个）\n    log_format lyr_test '$remote_addr - $\"http_user_agent\"'\n    # 日志的存放路径，和日志格式\n    access_log /var/log/nginx/access.log lyr_test;\n}\n")])])]),t("h1",{attrs:{id:"数据库服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库服务","aria-hidden":"true"}},[n._v("#")]),n._v(" 数据库服务")]),n._v(" "),t("h1",{attrs:{id:"缓存服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#缓存服务","aria-hidden":"true"}},[n._v("#")]),n._v(" 缓存服务")]),n._v(" "),t("h1",{attrs:{id:"git"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git","aria-hidden":"true"}},[n._v("#")]),n._v(" git")]),n._v(" "),t("p",[n._v("yum install git\n命令")]),n._v(" "),t("h1",{attrs:{id:"服务管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务管理","aria-hidden":"true"}},[n._v("#")]),n._v(" 服务管理")]),n._v(" "),t("ul",[t("li",[n._v("定时任务：crontab; crontab -e （编辑配置文件）; crontab")]),n._v(" "),t("li",[n._v("日期同步：Ntpdate; date; ntpdate; yum install utpdate（安装）; ntpdate cn.pool.ntp.org(同步时间)；rm /etc/localtime; sudo ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime(设置时区)")]),n._v(" "),t("li",[n._v("定时同步时间：crontab -l; 文件内容为 "),t("code",[n._v("*/30**** ntpdate cn.pool.ntp.org")]),n._v(" 每半个小时同步一次")]),n._v(" "),t("li",[n._v("日志切割：Logrotate;")])]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("cat /etc/logrotage.d/nginx;\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 52\n    compress\n    deloycompress\n    notifempty\n    create 640 nginx adm\n    sharedscripts\n    postrotate\n        if[ -f /var/run/gninx.pid ]; then\n            kill -USR1 `cat /var/run/nginx.pid`\n        fi\n    endscript\n}\n")])])]),t("ul",[t("li",[n._v("进程管理：supervisor")])]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("pip install supervisor\n")])])]),t("h1",{attrs:{id:"监控神器-zabbix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#监控神器-zabbix","aria-hidden":"true"}},[n._v("#")]),n._v(" 监控神器 zabbix")]),n._v(" "),t("p",[n._v("可以监控 mysql,等等服务")])])}],!1,null,null,null);r.options.__file="linux.md";e.default=r.exports}}]);