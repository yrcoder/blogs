<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>react 设计模式和最佳实战 | YRcoder</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/blogs/assets/css/0.styles.49137356.css" as="style"><link rel="preload" href="/blogs/assets/js/app.2b612f2a.js" as="script"><link rel="preload" href="/blogs/assets/js/20.fce76639.js" as="script"><link rel="prefetch" href="/blogs/assets/js/19.32209c0d.js"><link rel="prefetch" href="/blogs/assets/js/2.d8d0300f.js"><link rel="prefetch" href="/blogs/assets/js/3.78bce9f9.js"><link rel="prefetch" href="/blogs/assets/js/4.a3a81660.js"><link rel="prefetch" href="/blogs/assets/js/5.43029159.js"><link rel="prefetch" href="/blogs/assets/js/6.875575e2.js"><link rel="prefetch" href="/blogs/assets/js/7.c9ffc06c.js"><link rel="prefetch" href="/blogs/assets/js/8.93c6ec89.js"><link rel="prefetch" href="/blogs/assets/js/9.84e0ec54.js"><link rel="prefetch" href="/blogs/assets/js/10.db99257f.js"><link rel="prefetch" href="/blogs/assets/js/11.687313e6.js"><link rel="prefetch" href="/blogs/assets/js/12.28f8784f.js"><link rel="prefetch" href="/blogs/assets/js/13.0b2e299e.js"><link rel="prefetch" href="/blogs/assets/js/14.ca8ee814.js"><link rel="prefetch" href="/blogs/assets/js/15.043efc1f.js"><link rel="prefetch" href="/blogs/assets/js/16.9a7002c8.js"><link rel="prefetch" href="/blogs/assets/js/17.e74890e2.js"><link rel="prefetch" href="/blogs/assets/js/18.faaea426.js"><link rel="prefetch" href="/blogs/assets/js/21.1ac604c1.js"><link rel="prefetch" href="/blogs/assets/js/22.5cc26646.js"><link rel="prefetch" href="/blogs/assets/js/23.26b6189b.js"><link rel="prefetch" href="/blogs/assets/js/24.243fe967.js"><link rel="prefetch" href="/blogs/assets/js/25.00d13d8e.js"><link rel="prefetch" href="/blogs/assets/js/26.9793daa6.js"><link rel="prefetch" href="/blogs/assets/js/27.5e040fb5.js"><link rel="prefetch" href="/blogs/assets/js/28.eac84346.js"><link rel="prefetch" href="/blogs/assets/js/29.ac1518e6.js"><link rel="prefetch" href="/blogs/assets/js/30.cb0249c5.js"><link rel="prefetch" href="/blogs/assets/js/31.1f406963.js"><link rel="prefetch" href="/blogs/assets/js/32.27c448e1.js"><link rel="prefetch" href="/blogs/assets/js/33.66d1b1d4.js"><link rel="prefetch" href="/blogs/assets/js/34.8f89af58.js"><link rel="prefetch" href="/blogs/assets/js/35.95d09688.js"><link rel="prefetch" href="/blogs/assets/js/36.0cdd6acb.js"><link rel="prefetch" href="/blogs/assets/js/37.f7075148.js"><link rel="prefetch" href="/blogs/assets/js/38.13ffb522.js"><link rel="prefetch" href="/blogs/assets/js/39.4edced61.js"><link rel="prefetch" href="/blogs/assets/js/40.5e43f35a.js">
    <link rel="stylesheet" href="/blogs/assets/css/0.styles.49137356.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/" class="home-link router-link-active"><!----> <span class="site-name">YRcoder</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blogs/grammar/htmlCss.html" class="nav-link">语法</a></div><div class="nav-item"><a href="/blogs/ruminate/前端的总结.html" class="nav-link">反刍</a></div><div class="nav-item"><a href="/blogs/other/createNote.html" class="nav-link">other</a></div><div class="nav-item"><a href="/blogs/excerpt/excerpt.html" class="nav-link">摘抄</a></div> <a href="https://github.com/yrcoder" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blogs/grammar/htmlCss.html" class="nav-link">语法</a></div><div class="nav-item"><a href="/blogs/ruminate/前端的总结.html" class="nav-link">反刍</a></div><div class="nav-item"><a href="/blogs/other/createNote.html" class="nav-link">other</a></div><div class="nav-item"><a href="/blogs/excerpt/excerpt.html" class="nav-link">摘抄</a></div> <a href="https://github.com/yrcoder" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>一层语法</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blogs/grammar/htmlCss.html" class="sidebar-link">html</a></li><li><a href="/blogs/grammar/less.html" class="sidebar-link">less</a></li><li><a href="/blogs/grammar/js.html" class="sidebar-link">JavaScript</a></li><li><a href="/blogs/grammar/es6.html" class="sidebar-link">ES6</a></li><li><a href="/blogs/grammar/vue.html" class="sidebar-link">vue</a></li><li><a href="/blogs/grammar/react.html" class="sidebar-link">react</a></li><li><a href="/blogs/grammar/managingState.html" class="sidebar-link">mobx</a></li><li><a href="/blogs/grammar/router.html" class="sidebar-link">router</a></li><li><a href="/blogs/grammar/debug.html" class="sidebar-link">调试</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>二层语法</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blogs/grammar/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/blogs/grammar/git.html" class="sidebar-link">git</a></li><li><a href="/blogs/grammar/vueSSR.html" class="sidebar-link">vueSSR</a></li><li><a href="/blogs/grammar/reactSSR.html" class="sidebar-link">ReactSSR</a></li><li><a href="/blogs/grammar/nginx.html" class="sidebar-link">nginx</a></li><li><a href="/blogs/grammar/http.html" class="sidebar-link">http</a></li><li><a href="/blogs/grammar/node.html" class="sidebar-link">node</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>三层语法</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blogs/grammar/reactDesignPattern.html" class="active sidebar-link">react 设计模式和最佳实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#react-基础" class="sidebar-link">react 基础</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#整理代码" class="sidebar-link">整理代码</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#可复用组件" class="sidebar-link">可复用组件</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#组合一切" class="sidebar-link">组合一切</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#恰当的获取数据" class="sidebar-link">恰当的获取数据</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#为浏览器编写代码" class="sidebar-link">为浏览器编写代码</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#美化组件" class="sidebar-link">美化组件</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#服务端渲染" class="sidebar-link">服务端渲染</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#提升性能" class="sidebar-link">提升性能</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#测试与调试" class="sidebar-link">测试与调试</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#需要避免的反模式" class="sidebar-link">需要避免的反模式</a></li><li class="sidebar-sub-header"><a href="/blogs/grammar/reactDesignPattern.html#未来的行动" class="sidebar-link">未来的行动</a></li></ul></li><li><a href="/blogs/grammar/jsDesignPattern.html" class="sidebar-link">javascript 设计模式</a></li><li><a href="/blogs/grammar/zepto源码.html" class="sidebar-link">zepto 设计和源码分析</a></li><li><a href="/blogs/grammar/vue源码.html" class="sidebar-link">vue 源码</a></li><li><a href="/blogs/grammar/react源码.html" class="sidebar-link">react 源码</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="react-设计模式和最佳实战"><a href="#react-设计模式和最佳实战" aria-hidden="true" class="header-anchor">#</a> react 设计模式和最佳实战</h1> <h2 id="react-基础"><a href="#react-基础" aria-hidden="true" class="header-anchor">#</a> react 基础</h2> <p>从高级角度介绍了 React 的基本概念</p> <h3 id="声明式编程"><a href="#声明式编程" aria-hidden="true" class="header-anchor">#</a> 声明式编程</h3> <ul><li>声明式编程中无须使用变量，也不用在执行过程中持续更新变量的值。声明式编程避免了创建和修改状态</li> <li>只需要描述他们想要实现什么目的，无须列出实现效果的所有步骤</li> <li>React 遵循声明式范式，因此无须告诉它如何与 DOM 交互。你只要声明希望在屏幕上看到的内容，React 就会完成剩下的工作</li></ul> <p>核心包 react 实现了 React 库的核心特性，react-dom 则包含了与浏览器相关的所有特性。
这样做的理由是，核心包可以用于支持不同的目标平台，如浏览器中的 React DOM 以及移动设备上的 React Native。</p> <h2 id="整理代码"><a href="#整理代码" aria-hidden="true" class="header-anchor">#</a> 整理代码</h2> <p>保持代码整洁并遵循编程风格指南。了解函数式编程的基础知识对于使用 React 也很重要</p> <ul><li>为了在代码中使用 JSX 及 ES2015 的特性要安装 Babel,Babel 是 React 社区广泛使用的一个流行 JavaScript 编译器</li> <li>创建 div 元素,运行 Babel 时会将<div></div>转换成 React.createElement('div')，编写模板时要始终牢记这一点。</li> <li>JSX 不是一门标准语言，需要转译成 JavaScript。由于这一点，有些属性无法使用。用 className 取代 classhtmlFor 取代 for<code>&lt;label className=&quot;awesome-label&quot; htmlFor=&quot;name&quot; /&gt;</code></li> <li>如果设置某个属性却没有赋值，那么 JSX 会默认其值是 true <code>&lt;button disabled /&gt;</code></li> <li>属性展开：<code>const foo = { id: 'bar' }; &lt;div {...foo} /&gt;</code></li> <li>可以用双花括号封装 JavaScript 表达式以作为属性值 <code>&lt;button disabled={errors.length} /&gt;</code></li> <li>render-if，react-only-if， 多个 if-else 渲染模版替代方案</li> <li>循环：<code>&lt;ul&gt;{users.map(user =&gt;&lt;li&gt;{user.name}&lt;/li&gt;)} &lt;/ul&gt;</code></li></ul> <h3 id="函数式编程"><a href="#函数式编程" aria-hidden="true" class="header-anchor">#</a> 函数式编程</h3> <p>函数式编程就是一种声明式范式，能够避免代码副作用，同时它推崇数据不可变，以便更易维护与考量代码。</p> <ul><li>高阶函数接受一个函数作为参数，也可以传入其他参数，最后返回另一个函数。返回的函数通常会添加一些增强的特殊行为。将组件当作函数，并为它们增加一些常用行为</li> <li>纯函数：是指它不产生副作用，也就是说它不会改变自身作用域以外的任何东西
<ul><li>如果函数改变了应用状态、修改了上层作用域定义的变量，或者与 DOM 这样的外部实体发生了交互就是非纯粹函数</li> <li>它可以运行多次，并且总能得到同样的结果，因为没有将数据存储在其他地方，也没有修改任何东西</li> <li>函数不会修改变量值，而是创建新的变量，赋新值后再返回变量。操作数据的这种方式称为不可变性</li> <li>柯里化过程就是将多参数函数转换成单参数函数，这些单参数函数的返回值也是函数
<ul><li>传入第一个参数后，第一个值被保留起来，返回的第二个函数可以多次复用</li> <li>const add = x =&gt; y =&gt; x + y;const add1 = add(1); add1(2); add1(3)</li></ul></li></ul></li> <li>组合: 函数（和组件）可以结合产生新函数，从而提供更高级的功能与属性
<ul><li><code>const add = (x, y) =&gt; x + y; const square = x =&gt; x * x</code></li> <li><code>const addAndSquare = (x, y) =&gt; square(add(x, y))</code></li></ul></li> <li>函数式编程与 UI : 可以将 UI 看作传入应用状态的函数
<ul><li>UI = f(state)</li> <li>希望这是一个幂等函数，即传入相同的应用状态时会返回同样的 UI。</li> <li>将创建 UI 的组件看作函数,组件可以组合形成最后的 UI</li></ul></li></ul> <h2 id="可复用组件"><a href="#可复用组件" aria-hidden="true" class="header-anchor">#</a> 可复用组件</h2> <p>保持代码库整洁且可维护，最重要的是开发真正可复用的组件
React 允许将组件定义为无状态函数</p> <ul><li>React 的工作方式很像状态机，每当状态改变就重新渲染</li> <li>只要能根据 props 计算最终值，就不应该将任何数据保存在状态中
<ul><li><code>getPrice() {return this.props.currency + this.props.value}</code></li></ul></li> <li>不要把 props 里的数据复制到状态里，直接在 render()方法中计算即可</li> <li>不要把没有参与渲染的数据放进状态</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 第一步先创建可复用的列表组件，通过定义通用的集合属性，对该列表组件做一些抽象并与显示的数据解耦</span>
List<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
	collection<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>array<span class="token punctuation">,</span>
	textKey<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
	titleKey<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">List</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> collection<span class="token punctuation">,</span> textKey<span class="token punctuation">,</span> titleKey <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
	<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
		<span class="token punctuation">{</span>collection<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
			<span class="token operator">&lt;</span>Item key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span> text<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">[</span>textKey<span class="token punctuation">]</span><span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">[</span>titleKey<span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token punctuation">,</span> title <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
	<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
		<span class="token punctuation">{</span>text <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">}</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
Item<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
	text<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
	title<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="组合一切"><a href="#组合一切" aria-hidden="true" class="header-anchor">#</a> 组合一切</h2> <p>真实应用由不同的组件构成，重要的是让组件之间可以高效地通信，并按照正确的形式组织和搭建层次结构</p> <p>容器组件 + 表现组件</p> <ul><li>逻辑： 逻辑一般指与 UI 无关的那些东西，如 API 的调用、数据操作以及事件处理器</li> <li>表现： 渲染方法中创建元素用来显示 UI 的部分</li> <li>无状态函数式组件就是纯粹函数，传入状态并返回元素</li> <li>容器组件：
<ul><li>更关心行为部分</li> <li>负责渲染对应的表现组件；</li> <li>发起 API 请求并操作数据</li> <li>定义事件处理器</li> <li>写作类的形式</li></ul></li> <li>表现组件：
<ul><li>更关心视觉表现</li> <li>负责渲染 HTML 标记（或其他组件）</li> <li>以 props 的形式从父组件接收数据</li> <li>通常写作无状态函数式组件</li></ul></li> <li>mixin：不同组件拥有相同行为</li> <li>当高阶函数概念应用在组件上时，我们将它简称为高阶组件
<ul><li>高阶组件其实就是函数，它接收组件作为参数，对组件进行增强后返回</li> <li>recompose（库）： 可以串联多个高阶组件以尽量保持组件简洁</li></ul></li> <li>函数子组件：动态地组合组件
<ul><li>const Name = ({ children }) =&gt; children('World')</li> <li><code>&lt;Name&gt;{name =&gt; &lt;div&gt;Hello, {name}!&lt;/div&gt;}&lt;/Name&gt;</code></li></ul></li></ul> <h2 id="恰当的获取数据"><a href="#恰当的获取数据" aria-hidden="true" class="header-anchor">#</a> 恰当的获取数据</h2> <p>任何客户端应用在某些时刻都必须处理数据，并且介绍了不同的技巧和方法，让你能够以 React 的方式获取数据</p> <h2 id="为浏览器编写代码"><a href="#为浏览器编写代码" aria-hidden="true" class="header-anchor">#</a> 为浏览器编写代码</h2> <p>了如何正确使用在浏览器中运行的应用，还讲解了一些高级概念，如事件、动画以及如何与 DOM 交互</p> <h2 id="美化组件"><a href="#美化组件" aria-hidden="true" class="header-anchor">#</a> 美化组件</h2> <p>开发美观的 UI 组件，React 可以通过多种方式实现这个目的，</p> <h2 id="服务端渲染"><a href="#服务端渲染" aria-hidden="true" class="header-anchor">#</a> 服务端渲染</h2> <h2 id="提升性能"><a href="#提升性能" aria-hidden="true" class="header-anchor">#</a> 提升性能</h2> <h2 id="测试与调试"><a href="#测试与调试" aria-hidden="true" class="header-anchor">#</a> 测试与调试</h2> <h2 id="需要避免的反模式"><a href="#需要避免的反模式" aria-hidden="true" class="header-anchor">#</a> 需要避免的反模式</h2> <h2 id="未来的行动"><a href="#未来的行动" aria-hidden="true" class="header-anchor">#</a> 未来的行动</h2></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blogs/grammar/node.html" class="prev">
          node
        </a></span> <span class="next"><a href="/blogs/grammar/jsDesignPattern.html">
          javascript 设计模式
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/blogs/assets/js/20.fce76639.js" defer></script><script src="/blogs/assets/js/app.2b612f2a.js" defer></script>
  </body>
</html>
